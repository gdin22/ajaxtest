<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>cloud</title>
</head>
<body>
    <div style="float:left;">
        <form action="/get_cloud/" method="post" style="margin: auto 0;">
            请输入asin:<br>
            <input type="text" id="search-text" name="q"><button type="button" id="'search-button">搜索</button>
            <p><span id="search-result" style="background-color: aliceblue; border: red"></span></p>
        </form>
    </div>
    <div style="float:left;">选择尺码<select id="size"></select></div>
    <div style="float:left;">选择颜色<select id="color"></select></div>
    <div style="float:left;">选择星级<select id="star"></select></div>
<script src="/static/js/jquery-3.3.1.min.js"></script>
<script>
    // 首先输入寻找asin
    // 然后出现不同的color， size 和 color 进行选择
    // 也可以直接进行提交 如果没有选择星级 则是会给出两张云图 五星和一星的
    // 在
    $(document).ready(function () {
        $("#search-text").keyup(function () {
            var q = $("#search-text").val();
            $.post('/get_cloud/', {'q':q}, function (data) {
                for(var i = data.length-1; i >= 0; i--){
                    if (data[i] != '0'){
                        $("#search-result").append(data[i] + '<br/>')}
                }
            });
        });

        $("#size").change(function () {
            var asin = $("#search-text").val()
            var size = $("#size").val()
            $.get("/get_number", {'size':asin, 'size':size}, function (ret) {
                $("#size").html(ret).css('display', 'block').removeAttr('disabled')
            })
        });


       $('#search-text').keydown(function () {
            $("#search-result").empty();
        });
        /*
        $("#search-text").blur(function () {
            $("#search-result").empty();
        });*/
    });
</script>
</body>
</html>